## 适用设备
- PIC
- AVR
- 等等（待补充）

## 头文件

只需要包含 `<xc.h>` 即可，不要包含特定设备的头文件，可能会不齐全。

```c
#include <xc.h>
```

## 类型

特殊的是 `__bit` 类型，包含一位信息，常用于表示 Flag。

- `_Bool` ：类型转换时会将除 0 外的值转换为 `true` ，而 `__bit` 则只是丢掉高位，保留最低位。

### struct

```c
struct {
	unsigned lo : 1;  // 在结构中定义位
	unsigned    : 6;  // 可以这样以跳过不使用的位
	unsigned hi : 1;
}
```

## Configuration

在 xc8 的安装目录下的 `doc/pic_chipinfo.html` 等的文件里有关于相关设备的配置方法和相关信息。

## 计时器

### TIMER0

- 8 位计时器寄存器，最多 1:256 分频（与看门狗共用）
- T0CS: =0 为计时，1为计数
- TMR0IF: 中断标志，需要软件清零
- 不能在 SLEEP MODE 使用

## 中断

> 注意：不要在 ISR 中重新开中断，硬件会自动重开中断的。

有两个宏包含在 `<xc.h>` 中：
- `ei()` 会开启所有的中断
- `di()` 会关闭所有的中断

> 其实质是控制全局中断位

### 在 ISR 中访问对象

在中断中读或写的变量最好用 `volatile` 标识以避免出错。

其次，应尽量不在 ISR 中访问共享全局量，特别是在对其操作不止一个指令时。

在需要访问时应该在操作前关中断，在操作后再开中断。